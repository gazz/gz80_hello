                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 4.0.0 #11528 (Mac OS X x86_64)
                              4 ;--------------------------------------------------------
                              5 	.module main
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _main
                             12 	.globl _clear_screen
                             13 	.globl _puts
                             14 	.globl _printf
                             15 	.globl _hello
                             16 	.globl _b
                             17 	.globl _a
                             18 	.globl _putchar
                             19 ;--------------------------------------------------------
                             20 ; special function registers
                             21 ;--------------------------------------------------------
                             22 ;--------------------------------------------------------
                             23 ; ram data
                             24 ;--------------------------------------------------------
                             25 	.area _DATA
                             26 ;--------------------------------------------------------
                             27 ; ram data
                             28 ;--------------------------------------------------------
                             29 	.area _INITIALIZED
   0000                      30 _a::
   0000                      31 	.ds 1
   0001                      32 _b::
   0001                      33 	.ds 1
   0002                      34 _hello::
   0002                      35 	.ds 8
                             36 ;--------------------------------------------------------
                             37 ; absolute external ram data
                             38 ;--------------------------------------------------------
                             39 	.area _DABS (ABS)
                             40 ;--------------------------------------------------------
                             41 ; global & static initialisations
                             42 ;--------------------------------------------------------
                             43 	.area _HOME
                             44 	.area _GSINIT
                             45 	.area _GSFINAL
                             46 	.area _GSINIT
                             47 ;--------------------------------------------------------
                             48 ; Home
                             49 ;--------------------------------------------------------
                             50 	.area _HOME
                             51 	.area _HOME
                             52 ;--------------------------------------------------------
                             53 ; code
                             54 ;--------------------------------------------------------
                             55 	.area _CODE
                             56 ;main.c:5: void clear_screen() {
                             57 ;	---------------------------------
                             58 ; Function clear_screen
                             59 ; ---------------------------------
   0000                      60 _clear_screen::
                             61 ;main.c:8: __endasm;
   0000 CD F5 00      [17]   62 	call	0xf5
                             63 ;main.c:9: }
   0003 C9            [10]   64 	ret
                             65 ;main.c:11: int putchar(int ch) {
                             66 ;	---------------------------------
                             67 ; Function putchar
                             68 ; ---------------------------------
   0004                      69 _putchar::
                             70 ;main.c:17: __endasm;
   0004 FD 21 02 00   [14]   71 	ld	iy, #2 ; bypass return address
   0008 FD 39         [15]   72 	add	iy, sp
   000A FD 5E 00      [19]   73 	ld	e, (iy)
   000D CD 8E 00      [17]   74 	call	0x8e
                             75 ;main.c:18: return 0;
   0010 21 00 00      [10]   76 	ld	hl, #0x0000
                             77 ;main.c:19: }
   0013 C9            [10]   78 	ret
                             79 ;main.c:23: int main(void) {
                             80 ;	---------------------------------
                             81 ; Function main
                             82 ; ---------------------------------
   0014                      83 _main::
                             84 ;main.c:25: clear_screen();
   0014 CDr00r00      [17]   85 	call	_clear_screen
                             86 ;main.c:27: printf("\n");
   0017 21r3Er00      [10]   87 	ld	hl, #___str_1
   001A E5            [11]   88 	push	hl
   001B CDr00r00      [17]   89 	call	_puts
                             90 ;main.c:28: printf("math:%d + %d = %d\n", 2, 5, (2+5), hello);
   001E 21r02r00      [10]   91 	ld	hl, #_hello
   0021 E3            [19]   92 	ex	(sp),hl
   0022 21 07 00      [10]   93 	ld	hl, #0x0007
   0025 E5            [11]   94 	push	hl
   0026 2E 05         [ 7]   95 	ld	l, #0x05
   0028 E5            [11]   96 	push	hl
   0029 2E 02         [ 7]   97 	ld	l, #0x02
   002B E5            [11]   98 	push	hl
   002C 21r3Fr00      [10]   99 	ld	hl, #___str_2
   002F E5            [11]  100 	push	hl
   0030 CDr00r00      [17]  101 	call	_printf
   0033 21 0A 00      [10]  102 	ld	hl, #10
   0036 39            [11]  103 	add	hl, sp
   0037 F9            [ 6]  104 	ld	sp, hl
                            105 ;main.c:30: while(1) {
   0038                     106 00102$:
                            107 ;main.c:31: a++;
   0038 21r00r00      [10]  108 	ld	hl, #_a+0
   003B 34            [11]  109 	inc	(hl)
                            110 ;main.c:33: }
   003C 18 FA         [12]  111 	jr	00102$
   003E                     112 ___str_1:
   003E 00                  113 	.db 0x00
   003F                     114 ___str_2:
   003F 6D 61 74 68 3A 25   115 	.ascii "math:%d + %d = %d"
        64 20 2B 20 25 64
        20 3D 20 25 64
   0050 0A                  116 	.db 0x0a
   0051 00                  117 	.db 0x00
                            118 	.area _CODE
                            119 	.area _INITIALIZER
   0000                     120 __xinit__a:
   0000 0C                  121 	.db #0x0c	; 12
   0001                     122 __xinit__b:
   0001 22                  123 	.db #0x22	; 34
   0002                     124 __xinit__hello:
   0002 79 65 65 68 61 61   125 	.ascii "yeehaa!"
        21
   0009 00                  126 	.db 0x00
                            127 	.area _CABS (ABS)
